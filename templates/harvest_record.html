<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>é‡‡æ‘˜ç»“ç®— - ç»¿è‰²å†œåœº</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --farm-green: #2e7d32;
            --harvest-orange: #f57c00;
            --bg-gray: #f0f2f5;
        }

        body {
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: var(--bg-gray);
            margin: 0;
            color: #333;
        }

        /* ç°ä»£å¯¼èˆªæ  */
        .navbar {
            background: linear-gradient(135deg, var(--farm-green) 0%, #1b5e20 100%);
            color: white;
            padding: 0 40px;
            height: 64px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        .navbar .brand { font-size: 22px; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        .navbar a {
            color: white;
            text-decoration: none;
            font-size: 14px;
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s;
        }
        .navbar a:hover { background: rgba(255,255,255,0.2); transform: translateY(-1px); }

        /* é‡‡æ‘˜è¡¨å•å¡ç‰‡ */
        .harvest-container {
            max-width: 550px;
            margin: 60px auto;
            background: white;
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        /* é¡¶éƒ¨è£…é¥°æ¡ */
        .harvest-container::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; height: 6px;
            background: linear-gradient(to right, var(--harvest-orange), #ffb74d);
        }

        h2 {
            text-align: center;
            color: #222;
            margin-top: 0;
            font-size: 26px;
            font-weight: 700;
        }
        h2 i { color: var(--harvest-orange); margin-right: 10px; }

        .form-subtitle {
            text-align: center;
            color: #8898aa;
            font-size: 14px;
            margin-bottom: 30px;
        }

        .input-group { margin-bottom: 25px; }
        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #525f7f;
        }

        select, input {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid #e0e6ed;
            border-radius: 12px;
            font-size: 15px;
            box-sizing: border-box;
            transition: all 0.2s;
            background-color: #f9fbfd;
        }
        select:focus, input:focus {
            outline: none;
            border-color: var(--harvest-orange);
            background-color: #fff;
            box-shadow: 0 0 0 3px rgba(245, 124, 0, 0.1);
        }

        .btn-harvest {
            background: linear-gradient(135deg, var(--harvest-orange) 0%, #e65100 100%);
            color: white;
            border: none;
            width: 100%;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(245, 124, 0, 0.3);
            margin-top: 10px;
        }
        .btn-harvest:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(245, 124, 0, 0.4);
            filter: brightness(1.1);
        }
        .btn-harvest:active { transform: translateY(0); }

        .tips {
            margin-top: 20px;
            font-size: 12px;
            color: #999;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="navbar">
    <div class="brand">ğŸŒ¾ <span>ç»¿è‰²å†œåœºç®¡ç†ç³»ç»Ÿ</span></div>
    <div>
        {% if request.session.user_role == 'ç®¡ç†å‘˜' %}
            <a href="/plot_admin/"><i class="fa-solid fa-house"></i> è¿”å›çœ‹æ¿</a>
        {% else %}
            <a href="/plot_staff/"><i class="fa-solid fa-tasks"></i> æˆ‘çš„ä»»åŠ¡</a>
        {% endif %}
    </div>
</div>

<div class="harvest-container">
    <h2><i class="fa-solid fa-basket-shopping"></i> ç”Ÿäº§é‡‡æ‘˜ç»“ç®—</h2>
    <p class="form-subtitle">å®Œæˆé‡‡æ‘˜åï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ç»“ç®—å¹¶é‡Šæ”¾åœ°å—</p>

    <form method="post">
        {% csrf_token %}
        <div class="input-group">
            <label><i class="fa-solid fa-map-location-dot"></i> å¾…é‡‡æ‘˜ä»»åŠ¡ï¼š</label>
            <select name="r_id_pid" required>
                <option value="" disabled selected>è¯·é€‰æ‹©è¦é‡‡æ‘˜çš„åœ°å—ä»»åŠ¡</option>
                {% for r in records %}
                <option value="{{ r.r_id }}|{{ r.p_id }}">ã€{{ r.p_id }}ã€‘ä½œç‰©ï¼š{{ r.crop }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="input-group">
            <label><i class="fa-solid fa-weight-hanging"></i> å®é™…äº§å‡ºé‡é‡ (kg)ï¼š</label>
            <input type="number" name="amount" step="0.1" placeholder="è¯·è¾“å…¥ç§°é‡æ•°æ®" required>
        </div>

        <div class="input-group">
            <label><i class="fa-solid fa-magnifying-glass"></i> æœå®å“ç›¸è¯„ä¼°ï¼š</label>
            <select name="quality">
                <option value="ä¼˜">âœ¨ ä¼˜ï¼ˆè‰²æ³½åŒ€ç§°ã€æ— è™«å®³ï¼‰</option>
                <option value="è‰¯">ğŸ‘ è‰¯ï¼ˆå¤§å°å‡åŒ€ã€è½»å¾®ç‘•ç–µï¼‰</option>
                <option value="å·®">âš ï¸ å·®ï¼ˆå“ç›¸è¾ƒå·®ã€ä¸å»ºè®®å…¥åº“ï¼‰</option>
            </select>
        </div>

        <input type="hidden" name="r_id" id="r_id">
        <input type="hidden" name="p_id" id="p_id">

        <button type="submit" class="btn-harvest" onclick="return fillData()">ç¡®è®¤é‡‡æ‘˜å¹¶é‡Šæ”¾åœ°å—</button>
        <p class="tips">ç‚¹å‡»ç¡®è®¤åï¼Œåœ°å—çŠ¶æ€å°†é‡ç½®ä¸ºâ€œç©ºé—²â€</p>
    </form>
</div>

<script>
    function fillData() {
        const select = document.getElementsByName('r_id_pid')[0];
        if(!select.value) {
            alert("è¯·é€‰æ‹©ä¸€ä¸ªé‡‡æ‘˜ä»»åŠ¡");
            return false;
        }
        const parts = select.value.split('|');
        document.getElementById('r_id').value = parts[0];
        document.getElementById('p_id').value = parts[1];
        return true;
    }
</script>

</body>
</html>